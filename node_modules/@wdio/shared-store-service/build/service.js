"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _utils = require("./utils");

var _client = require("./client");

class SharedStoreService {
  async beforeSession() {
    const port = await (0, _utils.readFile)((0, _utils.getPidPath)(process.ppid));
    (0, _client.setPort)(port.toString());
  }

  before() {
    const sharedStore = Object.create({}, {
      get: {
        value: key => global.browser.call(() => (0, _client.getValue)(key))
      },
      set: {
        value: (key, value) => global.browser.call(() => (0, _client.setValue)(key, value))
      }
    });
    global.browser.sharedStore = sharedStore;
  }

}

exports.default = SharedStoreService;